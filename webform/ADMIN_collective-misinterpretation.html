<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Roberto Mochetti">
    <meta name="description" content="Roberto Mochetti is a viola player, teacher, arranger, and composer. Passionate about experimental and chamber music, he has played, studied, and taught in Brazil, the United States, and in Denmark. Today, Roberto is working on his Doctor of Musical Arts degree at LSU, focusing on viola performance with a minor in experimental music and digital media.">
    <title>ADMIN - Collective Misinterpretation</title>

    <link rel="stylesheet" type="text/css" href="normalize.css">
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="https://kit.fontawesome.com/913023e2fb.js" crossorigin="anonymous"></script>
  </head>
  <body class="gradient">
    <h1>[admin page] Collective Misinterpretation</h1>
    <p>
      <button class="button" id="openForm">OPEN FORM</button>
      <button class="button" id="closeForm">CLOSE FORM</button>
      <button class="button" id="reset">RESET</button>
    </p>
    <section class="card-normal">
      <h2>Status</h2>
      <p id="formStatus">Form is currently <u id="statusText">closed</u><span id="countSentence"></span>.</p>

      <p>Current movement: <u><i id="movDisplay">0</i></u></p>
    </section>
     
    <footer>
      <div class="fa-wrapper">
        <a href="https://github.com/betodaviola?tab=repositories" title="GitHub Repositories" target="_blank" rel="noopener noreferrer"><i class="fa-brands fa-github"></i></a>
      </div>
    </footer>
    <script>
      let mov = 0;
      let countdown = 0;
      let countdownInterval = null;

      const formTime = 5; //Remember to set this appropriatelly based on the length of the movement

      const formStatus = document.getElementById('formStatus');
      const statusText = document.getElementById('statusText');
      const movDisplay = document.getElementById('movDisplay');
      const countSentence = document.getElementById('countSentence');



      document.getElementById('openForm').addEventListener('click', () => {
        mov++;
        movDisplay.textContent = mov;
        countdown = formTime;
        statusText.textContent = 'active';

        // Reset and start countdown (e.g., 10 seconds)


        
        // Clear any existing countdown. remember this variable is null
        clearInterval(countdownInterval);

        // Start new countdown
        countdownInterval = setInterval(() => {
          countdown--;

          countSentence.textContent = ' for ' + countdown + ' more seconds';


          if (countdown <= 0) {
            clearInterval(countdownInterval);
            statusText.textContent = 'closed';
            countSentence.textContent = '';
          }
        }, 1000);
      });
      document.getElementById('closeForm').addEventListener('click', () => {
        clearInterval(countdownInterval);
        statusText.textContent = 'closed';
        countSentence.textContent = '';
      });
      document.getElementById('reset').addEventListener('click', () => {
        clearInterval(countdownInterval);
        statusText.textContent = 'closed';
        countSentence.textContent = '';
        mov = 0;
        movDisplay.textContent = mov;
        
      });

    </script>
  </body>
</html>